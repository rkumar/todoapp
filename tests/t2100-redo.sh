#!/bin/sh

test_description='redo numbering

'
. ./test-lib.sh

#
# Add and list
#

cat > TODO2.txt << EOF
  2	[ ] adding a 14234 task 2 (2009-02-13)
        -  2.1	[ ] adding a 21218 subtask to 2 (2009-02-13)
                   -  2.1.1	[ ] adding a 16779 subtask to 2.1 (2009-02-13)
  4	[ ] adding a 28647 task 4 (2009-02-13)
        -  4.1	[ ] adding a 14992 subtask to 4 (2009-02-13)
                   -  4.1.1	[ ] adding a 30184 subtask to 4.1 (2009-02-13)
  6	[ ] adding a 1839 task 6 (2009-02-13)
        -  6.1	[ ] adding a 6944 subtask to 6 (2009-02-13)
                   -  6.1.1	[ ] adding a 141 subtask to 6.1 (2009-02-13)
  7	[ ] adding a 26041 task 7 (2009-02-13)
        -  7.1	[ ] adding a 5395 subtask to 7 (2009-02-13)
                   -  7.1.1	[ ] adding a 31430 subtask to 7.1 (2009-02-13)
  9	[ ] adding a 4739 task 9 (2009-02-13)
        -  9.1	[ ] adding a 24869 subtask to 9 (2009-02-13)
                   -  9.1.1	[ ] adding a 30841 subtask to 9.1 (2009-02-13)
 11	[ ] adding a 15746 task 11 (2009-02-13)
        -  11.1	[ ] adding a 31773 subtask to 11 (2009-02-13)
                    -  11.1.1	[ ] adding a 1969 subtask to 11.1 (2009-02-13)
 13	[ ] adding a 30570 task 13 (2009-02-13)
        -  13.1	[ ] adding a 25058 subtask to 13 (2009-02-13)
                    -  13.1.1	[ ] adding a 26082 subtask to 13.1 (2009-02-13)
 15	[ ] adding a 10758 task 15 (2009-02-13)
        -  15.1	[ ] adding a 13009 subtask to 15 (2009-02-13)
                    -  15.1.1	[ ] adding a 26808 subtask to 15.1 (2009-02-13)
 17	[ ] adding a 4896 task 17 (2009-02-13)
        -  17.1	[ ] adding a 26184 subtask to 17 (2009-02-13)
                    -  17.1.1	[ ] adding a 11182 subtask to 17.1 (2009-02-13)
 19	[ ] adding a 27745 task 19 (2009-02-13)
        -  19.1	[ ] adding a 6641 subtask to 19 (2009-02-13)
                    -  19.1.1	[ ] adding a 31599 subtask to 19.1 (2009-02-13)
 21	[ ] adding a 6787 task 21 (2009-02-13)
        -  21.1	[ ] adding a 2510 subtask to 21 (2009-02-13)
                    -  21.1.1	[ ] adding a 6895 subtask to 21.1 (2009-02-13)
 23	[ ] adding a 25065 task 23 (2009-02-13)
        -  23.1	[ ] adding a 32009 subtask to 23 (2009-02-13)
                    -  23.1.1	[ ] adding a 15945 subtask to 23.1 (2009-02-13)
 24	[ ] adding a 15777 task 24 (2009-02-13)
        -  24.1	[ ] adding a 23210 subtask to 24 (2009-02-13)
                    -  24.1.1	[ ] adding a 32039 subtask to 24.1 (2009-02-13)
 25	[ ] adding a 18547 task 25 (2009-02-13)
        -  25.1	[ ] adding a 13177 subtask to 25 (2009-02-13)
                    -  25.1.1	[ ] adding a 22359 subtask to 25.1 (2009-02-13)
 26	[ ] adding a 6578 task 26 (2009-02-13)
        -  26.1	[ ] adding a 26454 subtask to 26 (2009-02-13)
                    -  26.1.1	[ ] adding a 30801 subtask to 26.1 (2009-02-13)
 27	[ ] adding a 27694 task 27 (2009-02-13)
        -  27.1	[ ] adding a 8180 subtask to 27 (2009-02-13)
                    -  27.1.1	[ ] adding a 4115 subtask to 27.1 (2009-02-13)
 28	[ ] adding a 23768 task 28 (2009-02-13)
        -  28.1	[ ] adding a 23502 subtask to 28 (2009-02-13)
                    -  28.1.1	[ ] adding a 22947 subtask to 28.1 (2009-02-13)
 29	[ ] adding a 7214 task 29 (2009-02-13)
        -  29.1	[ ] adding a 31575 subtask to 29 (2009-02-13)
                    -  29.1.1	[ ] adding a 3760 subtask to 29.1 (2009-02-13)
 30	[ ] adding a 7461 task 30 (2009-02-13)
 31	[ ] adding a 23730 task 31 (2009-02-13)
 32	[ ] adding a 15346 task 32 (2009-02-13)
 33	[ ] adding a 8554 task 33 (2009-02-13)
 34	[ ] adding a 11626 task 34 (2009-02-13)
 35	[ ] adding a 24681 task 35 (2009-02-13)
 36	[ ] adding a 18420 task 36 (2009-02-13)
 37	[ ] adding a 7732 task 37 (2009-02-13)
 38	[ ] adding a 12548 task 38 (2009-02-13)
 39	[ ] adding a 9967 task 39 (2009-02-13)
EOF
test_todo_session 'redo' <<EOF

>>> todoapp.sh redo 2>&1 2>/dev/null >/dev/null
Operation complete.
Backup saved as TODO2.txt.bak.2009-02-13.

>>> todoapp.sh --no-colors --sort-serial list
  1 [ ] adding a 14234 task 2 (2009-02-13)
        -  1.1 [ ] adding a 21218 subtask to 2 (2009-02-13)
                   -  1.1.1 [ ] adding a 16779 subtask to 2.1 (2009-02-13)
  2 [ ] adding a 28647 task 4 (2009-02-13)
        -  2.1 [ ] adding a 14992 subtask to 4 (2009-02-13)
                   -  2.1.1 [ ] adding a 30184 subtask to 4.1 (2009-02-13)
  3 [ ] adding a 1839 task 6 (2009-02-13)
        -  3.1 [ ] adding a 6944 subtask to 6 (2009-02-13)
                   -  3.1.1 [ ] adding a 141 subtask to 6.1 (2009-02-13)
  4 [ ] adding a 26041 task 7 (2009-02-13)
        -  4.1 [ ] adding a 5395 subtask to 7 (2009-02-13)
                   -  4.1.1 [ ] adding a 31430 subtask to 7.1 (2009-02-13)
  5 [ ] adding a 4739 task 9 (2009-02-13)
        -  5.1 [ ] adding a 24869 subtask to 9 (2009-02-13)
                   -  5.1.1 [ ] adding a 30841 subtask to 9.1 (2009-02-13)
  6 [ ] adding a 15746 task 11 (2009-02-13)
        -   6.1 [ ] adding a 31773 subtask to 11 (2009-02-13)
                    -   6.1.1 [ ] adding a 1969 subtask to 11.1 (2009-02-13)
  7 [ ] adding a 30570 task 13 (2009-02-13)
        -   7.1 [ ] adding a 25058 subtask to 13 (2009-02-13)
                    -   7.1.1 [ ] adding a 26082 subtask to 13.1 (2009-02-13)
  8 [ ] adding a 10758 task 15 (2009-02-13)
        -   8.1 [ ] adding a 13009 subtask to 15 (2009-02-13)
                    -   8.1.1 [ ] adding a 26808 subtask to 15.1 (2009-02-13)
  9 [ ] adding a 4896 task 17 (2009-02-13)
        -   9.1 [ ] adding a 26184 subtask to 17 (2009-02-13)
                    -   9.1.1 [ ] adding a 11182 subtask to 17.1 (2009-02-13)
 10 [ ] adding a 27745 task 19 (2009-02-13)
        -  10.1 [ ] adding a 6641 subtask to 19 (2009-02-13)
                    -  10.1.1 [ ] adding a 31599 subtask to 19.1 (2009-02-13)
 11 [ ] adding a 6787 task 21 (2009-02-13)
        -  11.1 [ ] adding a 2510 subtask to 21 (2009-02-13)
                    -  11.1.1 [ ] adding a 6895 subtask to 21.1 (2009-02-13)
 12 [ ] adding a 25065 task 23 (2009-02-13)
        -  12.1 [ ] adding a 32009 subtask to 23 (2009-02-13)
                    -  12.1.1 [ ] adding a 15945 subtask to 23.1 (2009-02-13)
 13 [ ] adding a 15777 task 24 (2009-02-13)
        -  13.1 [ ] adding a 23210 subtask to 24 (2009-02-13)
                    -  13.1.1 [ ] adding a 32039 subtask to 24.1 (2009-02-13)
 14 [ ] adding a 18547 task 25 (2009-02-13)
        -  14.1 [ ] adding a 13177 subtask to 25 (2009-02-13)
                    -  14.1.1 [ ] adding a 22359 subtask to 25.1 (2009-02-13)
 15 [ ] adding a 6578 task 26 (2009-02-13)
        -  15.1 [ ] adding a 26454 subtask to 26 (2009-02-13)
                    -  15.1.1 [ ] adding a 30801 subtask to 26.1 (2009-02-13)
 16 [ ] adding a 27694 task 27 (2009-02-13)
        -  16.1 [ ] adding a 8180 subtask to 27 (2009-02-13)
                    -  16.1.1 [ ] adding a 4115 subtask to 27.1 (2009-02-13)
 17 [ ] adding a 23768 task 28 (2009-02-13)
        -  17.1 [ ] adding a 23502 subtask to 28 (2009-02-13)
                    -  17.1.1 [ ] adding a 22947 subtask to 28.1 (2009-02-13)
 18 [ ] adding a 7214 task 29 (2009-02-13)
        -  18.1 [ ] adding a 31575 subtask to 29 (2009-02-13)
                    -  18.1.1 [ ] adding a 3760 subtask to 29.1 (2009-02-13)
 19 [ ] adding a 7461 task 30 (2009-02-13)
 20 [ ] adding a 23730 task 31 (2009-02-13)
 21 [ ] adding a 15346 task 32 (2009-02-13)
 22 [ ] adding a 8554 task 33 (2009-02-13)
 23 [ ] adding a 11626 task 34 (2009-02-13)
 24 [ ] adding a 24681 task 35 (2009-02-13)
 25 [ ] adding a 18420 task 36 (2009-02-13)
 26 [ ] adding a 7732 task 37 (2009-02-13)
 27 [ ] adding a 12548 task 38 (2009-02-13)
 28 [ ] adding a 9967 task 39 (2009-02-13)

EOF

test_done
