#!/bin/sh
test_description="Testing out list_sort "
. ./test-lib.sh


cat > TODO2.txt <<CATEOF
  2	[ ] adding a 6611 task 2 (2009-02-13)
        -  2.1	[ ] (B) adding a 12109 subtask to 2 (2009-02-13)
                   -  2.1.1	[ ] adding a 24968 subtask to 2.1 (2009-02-13)
  4	[@] adding a 4414 task 4 (2009-02-13)
        -  4.1	[@] adding a 22083 subtask to 4 (2009-02-13)
                   -  4.1.1	[@] adding a 10963 subtask to 4.1 (2009-02-13)
  6	[ ] adding a 26784 task 6 (2009-02-13)
        -  6.1	[ ] adding a 16143 subtask to 6 (2009-02-13)
                   -  6.1.1	[ ] adding a 28829 subtask to 6.1 (2009-02-13)
  7	[ ] adding a 16032 task 7 (2009-02-13)
        -  7.1	[ ] adding a 19907 subtask to 7 (2009-02-13)
                   -  7.1.1	[ ] adding a 5091 subtask to 7.1 (2009-02-13)
  9	[ ] adding a 28875 task 9 (2009-02-13)
        -  9.1	[ ] adding a 32008 subtask to 9 (2009-02-13)
                   -  9.1.1	[ ] adding a 20388 subtask to 9.1 (2009-02-13)
 10	[ ] adding a 29525 task 10 (2009-02-13)
        -  10.1	[@] adding a 11416 subtask to 10 (2009-02-13)
                    -  10.1.1	[@] adding a 21595 subtask to 10.1 (2009-02-13)
 11	[ ] adding a 25921 task 11 (2009-02-13)
        -  11.1	[ ] adding a 21536 subtask to 11 (2009-02-13)
                    -  11.1.1	[x] adding a 5241 subtask to 11.1 (2009-02-13) (x2009-02-13)
 13	[ ] adding a 4107 task 13 (2009-02-13)
        -  13.1	[ ] adding a 9713 subtask to 13 (2009-02-13)
                    -  13.1.1	[ ] adding a 20557 subtask to 13.1 (2009-02-13)
 14	[ ] adding a 25342 task 14 (2009-02-13)
        -  14.1	[ ] adding a 11089 subtask to 14 (2009-02-13)
                    -  14.1.1	[ ] adding a 29463 subtask to 14.1 (2009-02-13)
 15	[ ] adding a 19707 task 15 (2009-02-13)
        -  15.1	[ ] adding a 13134 subtask to 15 (2009-02-13)
                    -  15.1.1	[ ] adding a 4844 subtask to 15.1 (2009-02-13)
 16	[ ] adding a 10495 task 16 (2009-02-13)
        -  16.1	[ ] adding a 8395 subtask to 16 (2009-02-13)
                    -  16.1.1	[ ] adding a 23704 subtask to 16.1 (2009-02-13)
 17	[ ] adding a 13075 task 17 (2009-02-13)
        -  17.1	[ ] adding a 32240 subtask to 17 (2009-02-13)
                    -  17.1.1	[ ] adding a 11086 subtask to 17.1 (2009-02-13)
 18	[ ] adding a 6511 task 18 (2009-02-13)
        -  18.1	[ ] adding a 30208 subtask to 18 (2009-02-13)
                    -  18.1.1	[ ] adding a 23889 subtask to 18.1 (2009-02-13)
 19	[ ] adding a 21003 task 19 (2009-02-13)
        -  19.1	[ ] adding a 20277 subtask to 19 (2009-02-13)
                    -  19.1.1	[ ] adding a 19875 subtask to 19.1 (2009-02-13)
 20	[ ] adding a 19058 task 20 (2009-02-13)
        -  20.1	[ ] adding a 7545 subtask to 20 (2009-02-13)
                    -  20.1.1	[ ] adding a 30360 subtask to 20.1 (2009-02-13)
 21	[ ] adding a 1596 task 21 (2009-02-13)
        -  21.1	[ ] adding a 28314 subtask to 21 (2009-02-13)
                    -  21.1.1	[ ] adding a 3618 subtask to 21.1 (2009-02-13)
 23	[x] adding a 13773 task 23 (2009-02-13) (x2009-02-13)
        -  23.1	[x] adding a 17402 subtask to 23 (2009-02-13) (x2009-02-13)
                    -  23.1.1	[x] adding a 15506 subtask to 23.1 (2009-02-13) (x2009-02-13)
 24	[@] adding a 27618 task 24 (2009-02-13)
        -  24.1	[@] adding a 30363 subtask to 24 (2009-02-13)
                    -  24.1.1	[@] adding a 28626 subtask to 24.1 (2009-02-13)
 25	[ ] (A) adding a 12030 task 25 (2009-02-13)
        -  25.1	[ ] adding a 24964 subtask to 25 (2009-02-13)
                    -  25.1.1	[ ] adding a 27797 subtask to 25.1 (2009-02-13)
 26	[ ] adding a 13121 task 26 (2009-02-13)
        -  26.1	[ ] adding a 19493 subtask to 26 (2009-02-13)
                    -  26.1.1	[ ] adding a 29214 subtask to 26.1 (2009-02-13)
 27	[ ] adding a 12774 task 27 (2009-02-13)
        -  27.1	[ ] adding a 12669 subtask to 27 (2009-02-13)
                    -  27.1.1	[ ] adding a 14007 subtask to 27.1 (2009-02-13)
 28	[ ] adding a 17015 task 28 (2009-02-13)
        -  28.1	[ ] adding a 17965 subtask to 28 (2009-02-13)
                    -  28.1.1	[ ] adding a 22211 subtask to 28.1 (2009-02-13)
 29	[ ] adding a 8440 task 29 (2009-02-13)
        -  29.1	[ ] adding a 17339 subtask to 29 (2009-02-13)
                    -  29.1.1	[ ] adding a 32314 subtask to 29.1 (2009-02-13)
 30	[ ] adding a 29281 task 30 (2009-02-13)
 31	[ ] (D) adding a 4659 task 31 (2009-02-13)
 32	[ ] adding a 29483 task 32 (2009-02-13)
 33	[ ] (C) adding a 14273 task 33 (2009-02-13)
 34	[ ] adding a 12740 task 34 (2009-02-13)
 35	[ ] (B) adding a 373 task 35 (2009-02-13)
 36	[ ] adding a 8193 task 36 (2009-02-13)
 37	[ ] adding a 8556 task 37 (2009-02-13)
 38	[ ] (A) adding a 26940 task 38 (2009-02-13)
 39	[ ] adding a 29881 task 39 (2009-02-13)
 40	[ ] +ruby @1.9 install on home powerbook (2009-02-13)
 41	[ ] +ruby @1.8 update at home (2009-02-13)
 42	[ ] (C) +lisp @1.8 remove from all machines (2009-02-13)
CATEOF

test_todo_session "Testing of list_sort" <<EOF
>>> todoapp.sh list
[1;33m 25 [ ] (A) adding a 12030 task 25 (2009-02-13)[0m
        -  25.1 [ ] adding a 24964 subtask to 25 (2009-02-13)
                    -  25.1.1 [ ] adding a 27797 subtask to 25.1 (2009-02-13)
[1;33m 38 [ ] (A) adding a 26940 task 38 (2009-02-13)[0m
[1;37m 35 [ ] (B) adding a 373 task 35 (2009-02-13)[0m
[0;36m 42 [ ] (C) +lisp @1.8 remove from all machines (2009-02-13)[0m
[0;36m 33 [ ] (C) adding a 14273 task 33 (2009-02-13)[0m
[0;32m 31 [ ] (D) adding a 4659 task 31 (2009-02-13)[0m
 41 [ ] +ruby @1.8 update at home (2009-02-13)
 40 [ ] +ruby @1.9 install on home powerbook (2009-02-13)
 16 [ ] adding a 10495 task 16 (2009-02-13)
        -  16.1 [ ] adding a 8395 subtask to 16 (2009-02-13)
                    -  16.1.1 [ ] adding a 23704 subtask to 16.1 (2009-02-13)
 34 [ ] adding a 12740 task 34 (2009-02-13)
 27 [ ] adding a 12774 task 27 (2009-02-13)
        -  27.1 [ ] adding a 12669 subtask to 27 (2009-02-13)
                    -  27.1.1 [ ] adding a 14007 subtask to 27.1 (2009-02-13)
 17 [ ] adding a 13075 task 17 (2009-02-13)
        -  17.1 [ ] adding a 32240 subtask to 17 (2009-02-13)
                    -  17.1.1 [ ] adding a 11086 subtask to 17.1 (2009-02-13)
 26 [ ] adding a 13121 task 26 (2009-02-13)
        -  26.1 [ ] adding a 19493 subtask to 26 (2009-02-13)
                    -  26.1.1 [ ] adding a 29214 subtask to 26.1 (2009-02-13)
 21 [ ] adding a 1596 task 21 (2009-02-13)
        -  21.1 [ ] adding a 28314 subtask to 21 (2009-02-13)
                    -  21.1.1 [ ] adding a 3618 subtask to 21.1 (2009-02-13)
  7 [ ] adding a 16032 task 7 (2009-02-13)
        -  7.1 [ ] adding a 19907 subtask to 7 (2009-02-13)
                   -  7.1.1 [ ] adding a 5091 subtask to 7.1 (2009-02-13)
 28 [ ] adding a 17015 task 28 (2009-02-13)
        -  28.1 [ ] adding a 17965 subtask to 28 (2009-02-13)
                    -  28.1.1 [ ] adding a 22211 subtask to 28.1 (2009-02-13)
 20 [ ] adding a 19058 task 20 (2009-02-13)
        -  20.1 [ ] adding a 7545 subtask to 20 (2009-02-13)
                    -  20.1.1 [ ] adding a 30360 subtask to 20.1 (2009-02-13)
 15 [ ] adding a 19707 task 15 (2009-02-13)
        -  15.1 [ ] adding a 13134 subtask to 15 (2009-02-13)
                    -  15.1.1 [ ] adding a 4844 subtask to 15.1 (2009-02-13)
 19 [ ] adding a 21003 task 19 (2009-02-13)
        -  19.1 [ ] adding a 20277 subtask to 19 (2009-02-13)
                    -  19.1.1 [ ] adding a 19875 subtask to 19.1 (2009-02-13)
 14 [ ] adding a 25342 task 14 (2009-02-13)
        -  14.1 [ ] adding a 11089 subtask to 14 (2009-02-13)
                    -  14.1.1 [ ] adding a 29463 subtask to 14.1 (2009-02-13)
 11 [ ] adding a 25921 task 11 (2009-02-13)
        -  11.1 [ ] adding a 21536 subtask to 11 (2009-02-13)
                    -  11.1.1 [0;31m[x][0m adding a 5241 subtask to 11.1 (2009-02-13) (x2009-02-13)
  6 [ ] adding a 26784 task 6 (2009-02-13)
        -  6.1 [ ] adding a 16143 subtask to 6 (2009-02-13)
                   -  6.1.1 [ ] adding a 28829 subtask to 6.1 (2009-02-13)
  9 [ ] adding a 28875 task 9 (2009-02-13)
        -  9.1 [ ] adding a 32008 subtask to 9 (2009-02-13)
                   -  9.1.1 [ ] adding a 20388 subtask to 9.1 (2009-02-13)
 30 [ ] adding a 29281 task 30 (2009-02-13)
 32 [ ] adding a 29483 task 32 (2009-02-13)
 10 [ ] adding a 29525 task 10 (2009-02-13)
        -  10.1 [0;32m[@][0m adding a 11416 subtask to 10 (2009-02-13)
                    -  10.1.1 [0;32m[@][0m adding a 21595 subtask to 10.1 (2009-02-13)
 39 [ ] adding a 29881 task 39 (2009-02-13)
 13 [ ] adding a 4107 task 13 (2009-02-13)
        -  13.1 [ ] adding a 9713 subtask to 13 (2009-02-13)
                    -  13.1.1 [ ] adding a 20557 subtask to 13.1 (2009-02-13)
 18 [ ] adding a 6511 task 18 (2009-02-13)
        -  18.1 [ ] adding a 30208 subtask to 18 (2009-02-13)
                    -  18.1.1 [ ] adding a 23889 subtask to 18.1 (2009-02-13)
  2 [ ] adding a 6611 task 2 (2009-02-13)
[1;37m        -  2.1 [ ] (B) adding a 12109 subtask to 2 (2009-02-13)[0m
                   -  2.1.1 [ ] adding a 24968 subtask to 2.1 (2009-02-13)
 36 [ ] adding a 8193 task 36 (2009-02-13)
 29 [ ] adding a 8440 task 29 (2009-02-13)
        -  29.1 [ ] adding a 17339 subtask to 29 (2009-02-13)
                    -  29.1.1 [ ] adding a 32314 subtask to 29.1 (2009-02-13)
 37 [ ] adding a 8556 task 37 (2009-02-13)
 24 [0;32m[@][0m adding a 27618 task 24 (2009-02-13)
        -  24.1 [0;32m[@][0m adding a 30363 subtask to 24 (2009-02-13)
                    -  24.1.1 [0;32m[@][0m adding a 28626 subtask to 24.1 (2009-02-13)
  4 [0;32m[@][0m adding a 4414 task 4 (2009-02-13)
        -  4.1 [0;32m[@][0m adding a 22083 subtask to 4 (2009-02-13)
                   -  4.1.1 [0;32m[@][0m adding a 10963 subtask to 4.1 (2009-02-13)
 23 [0;31m[x][0m adding a 13773 task 23 (2009-02-13) (x2009-02-13)
        -  23.1 [0;31m[x][0m adding a 17402 subtask to 23 (2009-02-13) (x2009-02-13)
                    -  23.1.1 [0;31m[x][0m adding a 15506 subtask to 23.1 (2009-02-13) (x2009-02-13)

>>> todoapp.sh --sort-serial list
  2 [ ] adding a 6611 task 2 (2009-02-13)
[1;37m        -  2.1 [ ] (B) adding a 12109 subtask to 2 (2009-02-13)[0m
                   -  2.1.1 [ ] adding a 24968 subtask to 2.1 (2009-02-13)
  4 [0;32m[@][0m adding a 4414 task 4 (2009-02-13)
        -  4.1 [0;32m[@][0m adding a 22083 subtask to 4 (2009-02-13)
                   -  4.1.1 [0;32m[@][0m adding a 10963 subtask to 4.1 (2009-02-13)
  6 [ ] adding a 26784 task 6 (2009-02-13)
        -  6.1 [ ] adding a 16143 subtask to 6 (2009-02-13)
                   -  6.1.1 [ ] adding a 28829 subtask to 6.1 (2009-02-13)
  7 [ ] adding a 16032 task 7 (2009-02-13)
        -  7.1 [ ] adding a 19907 subtask to 7 (2009-02-13)
                   -  7.1.1 [ ] adding a 5091 subtask to 7.1 (2009-02-13)
  9 [ ] adding a 28875 task 9 (2009-02-13)
        -  9.1 [ ] adding a 32008 subtask to 9 (2009-02-13)
                   -  9.1.1 [ ] adding a 20388 subtask to 9.1 (2009-02-13)
 10 [ ] adding a 29525 task 10 (2009-02-13)
        -  10.1 [0;32m[@][0m adding a 11416 subtask to 10 (2009-02-13)
                    -  10.1.1 [0;32m[@][0m adding a 21595 subtask to 10.1 (2009-02-13)
 11 [ ] adding a 25921 task 11 (2009-02-13)
        -  11.1 [ ] adding a 21536 subtask to 11 (2009-02-13)
                    -  11.1.1 [0;31m[x][0m adding a 5241 subtask to 11.1 (2009-02-13) (x2009-02-13)
 13 [ ] adding a 4107 task 13 (2009-02-13)
        -  13.1 [ ] adding a 9713 subtask to 13 (2009-02-13)
                    -  13.1.1 [ ] adding a 20557 subtask to 13.1 (2009-02-13)
 14 [ ] adding a 25342 task 14 (2009-02-13)
        -  14.1 [ ] adding a 11089 subtask to 14 (2009-02-13)
                    -  14.1.1 [ ] adding a 29463 subtask to 14.1 (2009-02-13)
 15 [ ] adding a 19707 task 15 (2009-02-13)
        -  15.1 [ ] adding a 13134 subtask to 15 (2009-02-13)
                    -  15.1.1 [ ] adding a 4844 subtask to 15.1 (2009-02-13)
 16 [ ] adding a 10495 task 16 (2009-02-13)
        -  16.1 [ ] adding a 8395 subtask to 16 (2009-02-13)
                    -  16.1.1 [ ] adding a 23704 subtask to 16.1 (2009-02-13)
 17 [ ] adding a 13075 task 17 (2009-02-13)
        -  17.1 [ ] adding a 32240 subtask to 17 (2009-02-13)
                    -  17.1.1 [ ] adding a 11086 subtask to 17.1 (2009-02-13)
 18 [ ] adding a 6511 task 18 (2009-02-13)
        -  18.1 [ ] adding a 30208 subtask to 18 (2009-02-13)
                    -  18.1.1 [ ] adding a 23889 subtask to 18.1 (2009-02-13)
 19 [ ] adding a 21003 task 19 (2009-02-13)
        -  19.1 [ ] adding a 20277 subtask to 19 (2009-02-13)
                    -  19.1.1 [ ] adding a 19875 subtask to 19.1 (2009-02-13)
 20 [ ] adding a 19058 task 20 (2009-02-13)
        -  20.1 [ ] adding a 7545 subtask to 20 (2009-02-13)
                    -  20.1.1 [ ] adding a 30360 subtask to 20.1 (2009-02-13)
 21 [ ] adding a 1596 task 21 (2009-02-13)
        -  21.1 [ ] adding a 28314 subtask to 21 (2009-02-13)
                    -  21.1.1 [ ] adding a 3618 subtask to 21.1 (2009-02-13)
 23 [0;31m[x][0m adding a 13773 task 23 (2009-02-13) (x2009-02-13)
        -  23.1 [0;31m[x][0m adding a 17402 subtask to 23 (2009-02-13) (x2009-02-13)
                    -  23.1.1 [0;31m[x][0m adding a 15506 subtask to 23.1 (2009-02-13) (x2009-02-13)
 24 [0;32m[@][0m adding a 27618 task 24 (2009-02-13)
        -  24.1 [0;32m[@][0m adding a 30363 subtask to 24 (2009-02-13)
                    -  24.1.1 [0;32m[@][0m adding a 28626 subtask to 24.1 (2009-02-13)
[1;33m 25 [ ] (A) adding a 12030 task 25 (2009-02-13)[0m
        -  25.1 [ ] adding a 24964 subtask to 25 (2009-02-13)
                    -  25.1.1 [ ] adding a 27797 subtask to 25.1 (2009-02-13)
 26 [ ] adding a 13121 task 26 (2009-02-13)
        -  26.1 [ ] adding a 19493 subtask to 26 (2009-02-13)
                    -  26.1.1 [ ] adding a 29214 subtask to 26.1 (2009-02-13)
 27 [ ] adding a 12774 task 27 (2009-02-13)
        -  27.1 [ ] adding a 12669 subtask to 27 (2009-02-13)
                    -  27.1.1 [ ] adding a 14007 subtask to 27.1 (2009-02-13)
 28 [ ] adding a 17015 task 28 (2009-02-13)
        -  28.1 [ ] adding a 17965 subtask to 28 (2009-02-13)
                    -  28.1.1 [ ] adding a 22211 subtask to 28.1 (2009-02-13)
 29 [ ] adding a 8440 task 29 (2009-02-13)
        -  29.1 [ ] adding a 17339 subtask to 29 (2009-02-13)
                    -  29.1.1 [ ] adding a 32314 subtask to 29.1 (2009-02-13)
 30 [ ] adding a 29281 task 30 (2009-02-13)
[0;32m 31 [ ] (D) adding a 4659 task 31 (2009-02-13)[0m
 32 [ ] adding a 29483 task 32 (2009-02-13)
[0;36m 33 [ ] (C) adding a 14273 task 33 (2009-02-13)[0m
 34 [ ] adding a 12740 task 34 (2009-02-13)
[1;37m 35 [ ] (B) adding a 373 task 35 (2009-02-13)[0m
 36 [ ] adding a 8193 task 36 (2009-02-13)
 37 [ ] adding a 8556 task 37 (2009-02-13)
[1;33m 38 [ ] (A) adding a 26940 task 38 (2009-02-13)[0m
 39 [ ] adding a 29881 task 39 (2009-02-13)
 40 [ ] +ruby @1.9 install on home powerbook (2009-02-13)
 41 [ ] +ruby @1.8 update at home (2009-02-13)
[0;36m 42 [ ] (C) +lisp @1.8 remove from all machines (2009-02-13)[0m

EOF
test_done
